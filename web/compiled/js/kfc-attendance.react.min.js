var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,VoterTemporaryCreateModal=React.createClass({displayName:"VoterTemporaryCreateModal",getInitialState:function(){return{form:{data:{proVoterId:null},errors:[]},provinceCode:53}},render:function(){return React.createElement(Modal,{style:{marginTop:"10px"},dialogClassName:"modal-custom-85",keyboard:!1,enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"New Voter Form")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},React.createElement("form",{id:"new-voter-create-form",onSubmit:this.submit},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formMunicipalityNo",validationState:this.getValidationState("municipalityNo")},React.createElement("label",{className:"control-label"},"City/Municipality"),React.createElement("select",{id:"municipality_select2",className:"form-control form-filter input-sm",name:"municipalityNo"}),React.createElement(HelpBlock,null,this.getError("municipalityNo")))),React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formBrgyNo",validationState:this.getValidationState("brgyNo")},React.createElement("label",{className:"control-label"},"Barangay"),React.createElement("select",{id:"barangay_select2",className:"form-control form-filter input-sm",name:"brgyNo"}),React.createElement(HelpBlock,null,this.getError("brgyNo")))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formPrecinctNo",validationState:this.getValidationState("precinctNo")},React.createElement(ControlLabel,null," Precinct No : "),React.createElement("input",{type:"text",value:this.state.form.data.precinctNo,className:"input-sm form-control",onChange:this.setFormProp,name:"precinctNo"}),React.createElement(HelpBlock,null,this.getError("precinctNo"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formLastname",validationState:this.getValidationState("lastname")},React.createElement(ControlLabel,null," Lastname : "),React.createElement("input",{type:"text",value:this.state.form.data.lastname,className:"input-sm form-control",onChange:this.setFormProp,name:"lastname"}),React.createElement(HelpBlock,null,this.getError("lastname")))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formFirstname",validationState:this.getValidationState("firstname")},React.createElement(ControlLabel,null," Firstname : "),React.createElement("input",{type:"text",value:this.state.form.data.firstname,className:"input-sm form-control",onChange:this.setFormProp,name:"firstname"}),React.createElement(HelpBlock,null,this.getError("firstname")))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formMiddlename",validationState:this.getValidationState("middlename")},React.createElement(ControlLabel,null," Middlename : "),React.createElement("input",{type:"text",value:this.state.form.data.middlename,className:"input-sm form-control",onChange:this.setFormProp,name:"middlename"}),React.createElement(HelpBlock,null,this.getError("middlename")))),React.createElement("div",{className:"col-md-1"},React.createElement(FormGroup,{controlId:"formExtName",validationState:this.getValidationState("extName")},React.createElement(ControlLabel,null," Ext : "),React.createElement("input",{type:"text",value:this.state.form.data.extName,className:"input-sm form-control",onChange:this.setFormProp,name:"extName"}),React.createElement(HelpBlock,null,this.getError("extName"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formGender",validationState:this.getValidationState("gender")},React.createElement(ControlLabel,null," Gender : "),React.createElement("select",{className:"input-sm form-control",onChange:this.setFormProp,name:"gender"},React.createElement("option",{value:""},"- Select -"),React.createElement("option",{value:"M"},"Male"),React.createElement("option",{value:"F"},"Female")),React.createElement(HelpBlock,null,this.getError("gender")))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Civil Status"),React.createElement("select",{id:"civil_status_select2",className:"form-control form-filter input-sm",name:"civilStatus"}))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Blood Type"),React.createElement("select",{id:"bloodtype_select2",className:"form-control form-filter input-sm",name:"bloodtype"}))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Occupation"),React.createElement("select",{id:"occupation_select2",className:"form-control form-filter input-sm",name:"occupation"}))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Religion"),React.createElement("select",{id:"religion_select2",className:"form-control form-filter input-sm",name:"religion"})))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Dialect"),React.createElement("select",{id:"dialect_select2",className:"form-control form-filter input-sm",name:"dialect"}))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Ip Group"),React.createElement("select",{id:"ip_group_select2",className:"form-control form-filter input-sm",name:"ipGroup"}))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"JPM Position"),React.createElement("select",{id:"voter_group_select2",className:"form-control form-filter input-sm",name:"voterGroup"}))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Barangay Position"),React.createElement("select",{id:"other_position_select2",className:"form-control form-filter input-sm",name:"voterGroup"})))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formCellphoneNo",validationState:this.getValidationState("cellphone")},React.createElement(ControlLabel,null," Cellphone No : "),React.createElement("input",{type:"text",placeholder:"Example : 09283182013",value:this.state.form.data.cellphoneNo,className:"input-sm form-control",onChange:this.setFormProp,name:"cellphoneNo"}),React.createElement(HelpBlock,null,this.getError("cellphone")))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formBirthdate",validationState:this.getValidationState("birthdate")},React.createElement(ControlLabel,null," Birthdate : "),React.createElement("input",{type:"date",value:this.state.form.data.birthdate,className:"input-sm form-control",onChange:this.setFormProp,name:"birthdate"}),React.createElement(HelpBlock,null,this.getError("birthdate"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12 text-right"},React.createElement("button",{className:"btn btn-primary btn-sm",style:{marginRight:"10px"},type:"submit"}," Submit "),React.createElement("button",{className:"btn btn-default btn-sm",type:"button",onClick:this.props.onHide}," Close "))))))},componentDidMount:function(){this.initSelect2()},initSelect2:function(){var e=this;$("#new-voter-create-form #voter-recruit-select2").select2({casesentitive:!1,placeholder:"Enter Name...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",dropdownCssClass:"custom-option",ajax:{url:Routing.generate("ajax_select2_project_voters"),data:function(t){return{searchText:t.term,electId:e.props.electId,proId:e.props.proId,provinceCode:e.props.provinceCode,municipalityNo:e.props.municipalityNo,brgyNo:e.props.brgyNo}},processResults:function(e,t){return{results:e.map(function(e){var t=e.voter_name+" - "+e.precinct_no+" ( "+e.municipality_name+", "+e.barangay_name+" )";return{id:e.voter_id,text:t}})}}}}),$("#new-voter-create-form #municipality_select2").select2({casesentitive:!1,placeholder:"Select City/Municipality",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_municipality"),data:function(t){return{searchText:t.term,provinceCode:e.state.provinceCode}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.municipality_no,text:e.name}})}}}}),$("#new-voter-create-form #barangay_select2").select2({casesentitive:!1,placeholder:"Select Barangay",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_barangay"),data:function(t){return{searchText:t.term,municipalityNo:$("#new-voter-create-form #municipality_select2").val(),provinceCode:e.state.provinceCode}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.brgy_no,text:e.name}})}}}}),$("#new-voter-create-form #civil_status_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_civil_status"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.civil_status,text:e.civil_status}})}}}}),$("#new-voter-create-form #bloodtype_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_bloodtype"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.bloodtype,text:e.bloodtype}})}}}}),$("#new-voter-create-form #occupation_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_occupation"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.occupation,text:e.occupation}})}}}}),$("#new-voter-create-form #religion_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_religion"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.religion,text:e.religion}})}}}}),$("#new-voter-create-form #dialect_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_dialect"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.dialect,text:e.dialect}})}}}}),$("#new-voter-create-form #ip_group_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_ip_group"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.ip_group,text:e.ip_group}})}}}}),$("#new-voter-create-form #voter_group_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_voter_group"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.voter_group,text:e.voter_group}})}}}}),$("#new-voter-create-form #other_position_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_voter_position"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.position,text:e.position}})}}}}),$("#new-voter-create-form #civil_status_select2").on("change",function(){console.log("civil status changed"),e.setFormPropValue("civilStatus",$(this).val())}),$("#new-voter-create-form #bloodtype_select2").on("change",function(){e.setFormPropValue("bloodtype",$(this).val())}),$("#new-voter-create-form #occupation_select2").on("change",function(){e.setFormPropValue("occupation",$(this).val())}),$("#new-voter-create-form #religion_select2").on("change",function(){e.setFormPropValue("religion",$(this).val())}),$("#new-voter-create-form #dialect_select2").on("change",function(){e.setFormPropValue("dialect",$(this).val())}),$("#new-voter-create-form #ip_group_select2").on("change",function(){e.setFormPropValue("ipGroup",$(this).val())}),$("#new-voter-create-form #municipality_select2").on("change",function(){e.setFormPropValue("municipalityNo",$(this).val())}),$("#new-voter-create-form #barangay_select2").on("change",function(){e.setFormPropValue("brgyNo",$(this).val())});var t=this.props.municipalityNo,a=this.props.municipalityName,n=this.props.barangayNo,o=this.props.barangayName;null!=t&&($("#new-voter-create-form #municipality_select2").empty().append($("<option/>").val(t).text(a)).trigger("change"),$("#new-voter-create-form #barangay_select2").empty().append($("<option/>").val(n).text(o)).trigger("change")),e.props.user.isAdmin||$("#new-voter-create-form #municipality_select2").attr("disabled","disabled")},loadVoter:function(e,t){var a=this;a.requestVoter=$.ajax({url:Routing.generate("ajax_get_project_voter",{proId:e,voterId:t}),type:"GET"}).done(function(e){var t=a.state.form;t.data.nodeLabel=e.voterName,t.data.nodeOrder=10,t.data.municipalityNo=e.municipalityNo,t.data.brgyNo=e.brgyNo,t.data.voterId=e.voterId,t.data.proVoterId=e.proVoterId,t.data.cellphoneNo=a.isEmpty(e.cellphoneNo)?"":e.cellphoneNo,t.data.voterGroup=a.isEmpty(e.voterGroup)?"KFC":e.voterGroup,t.data.remarks=a.isEmpty(e.remarks)?"":e.remarks,$("#voter-group-select2").empty().append($("<option/>").val(t.data.voterGroup).text(t.data.voterGroup)).trigger("change"),a.setState({form:t})})},setFormPropValue:function(e,t){var a=this.state.form;a.data[e]=t,this.setState({form:a})},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value.toUpperCase(),this.setState({form:t})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":""},isEmpty:function(e){return null==e||""==e},reset:function(){var e=this.state.form;e.errors=[],this.setState({form:e})},notify:function(e,t){$.notific8("zindex",11500),$.notific8(e,{heading:"System Message",color:t,life:5e3,verticalEdge:"right",horizontalEdge:"top"})},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;a.civilStatus=$("#new-voter-create-form #civil_status_select2").val(),a.bloodtype=$("#new-voter-create-form #bloodtype_select2").val(),a.occupation=$("#new-voter-create-form #occupation_select2").val(),a.religion=$("#new-voter-create-form #religion_select2").val(),a.dialect=$("#new-voter-create-form #dialect_select2").val(),a.ipGroup=$("#new-voter-create-form #ip_group_select2").val(),a.voterGroup=$("#new-voter-create-form #voter_group_select2").val(),a.position=$("#new-voter-create-form #other_position_select2").val(),a.electId=t.props.electId,a.proId=t.props.proId,t.requestPost=$.ajax({url:Routing.generate("ajax_post_project_temporary_voter"),data:a,type:"POST"}).done(function(e){t.props.onHide(),t.props.onSuccess(e),t.notify("New record has been saved.","teal")}).fail(function(e){t.setErrors(e.responseJSON),t.notify("Form validation failed!.","ruby")})}});window.VoterTemporaryCreateModal=VoterTemporaryCreateModal;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,KfcAttendanceProfileCreateModal=React.createClass({displayName:"KfcAttendanceProfileCreateModal",getInitialState:function(){return{showNewProfileModal:!1,showNewVoterCreateModal:!1,form:{data:{contactNo:"",birthdate:"",proVoterId:null},errors:[]}}},openNewVoterCreateModal:function(){console.log("opening modal"),this.setState({showNewVoterCreateModal:!0})},closeNewVoterCreateModal:function(){this.setState({showNewVoterCreateModal:!1})},render:function(){this.state.form.data;return React.createElement(Modal,{style:{marginTop:"30px"},keyboard:!1,enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"New Household Profile")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},this.state.showNewVoterCreateModal&&React.createElement(VoterTemporaryCreateModal,{proId:3,electId:423,provinceCode:53,show:this.state.showNewVoterCreateModal,onHide:this.closeNewVoterCreateModal}),React.createElement("form",{id:"attendee-form",onSubmit:this.submit},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-9"},React.createElement(FormGroup,{controlId:"formProVoterId",validationState:this.getValidationState("proVoterId")},React.createElement(ControlLabel,null,"Name : "),React.createElement("select",{id:"voter-select2",className:"form-control input-sm"}),React.createElement(HelpBlock,null,this.getError("proVoterId")))),React.createElement("div",{className:"col-md-3"},React.createElement("button",{style:{marginTop:"25px"},onClick:this.openNewVoterCreateModal,className:"btn btn-primary btn-sm",type:"button"}," Non-voter "))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-4"},React.createElement(FormGroup,{controlId:"formBirthdate",validationState:this.getValidationState("birthdate")},React.createElement(ControlLabel,null,"Birthday: "),React.createElement("input",{type:"date",value:this.state.form.data.birthdate,name:"birthdate",className:"input-md form-control",onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("birthdate")))),React.createElement("div",{className:"col-md-4"},React.createElement(FormGroup,{controlId:"formContactNo",validationState:this.getValidationState("contactNo")},React.createElement(ControlLabel,null," Cellphone No: "),React.createElement("input",{type:"text",value:this.state.form.data.contactNo,name:"contactNo",className:"input-md form-control",onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("contactNo"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12 text-right"},React.createElement("button",{className:"btn btn-primary btn-sm",style:{marginRight:"10px"},type:"submit"}," Submit "),React.createElement("button",{className:"btn btn-default btn-sm",type:"button",onClick:this.props.onHide}," Close "))))))},componentDidMount:function(){this.initSelect2()},initSelect2:function(){var e=this;$("#attendee-form #voter-select2").select2({casesentitive:!1,placeholder:"Enter Name...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",dropdownCssClass:"custom-option",ajax:{url:Routing.generate("ajax_select2_project_voters"),data:function(t){return{searchText:t.term,electId:423,proId:3,provinceCode:53,municipalityNo:$("#attendee-form #municipality_select2").val(),brgyNo:e.props.brgyNo}},processResults:function(e,t){return{results:e.map(function(e){var t=1==e.is_non_voter?"NO":"YES",a=e.voter_name+" ( "+e.municipality_name+", "+e.barangay_name+" ) - is voter? : "+t;return{id:e.pro_voter_id,text:a}})}}}}),$("#attendee-form #voter-select2").on("change",function(){e.loadVoter(3,$(this).val())})},loadVoter:function(e,t){var a=this;a.requestVoter=$.ajax({url:Routing.generate("ajax_get_project_voter",{proId:e,proVoterId:t}),type:"GET"}).done(function(e){var t=a.state.form;t.data.proVoterId=e.proVoterId,t.data.contactNo=e.cellphone,t.data.birthdate=a.isEmpty(e.birthdate)?"":moment(e.birthdate).format("YYYY-MM-DD"),a.setState({form:t})});var n=a.state.form;n.data.proVoterId=null,n.data.contactNo="",a.setState({form:n})},isEmpty:function(e){return null==e||""==e},setFormPropValue:function(e,t){var a=this.state.form;a.data[e]=t,this.setState({form:a})},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value,this.setState({form:t})},setFormCheckProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.checked?1:0,this.setState({form:t})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":""},isEmpty:function(e){return null==e||""==e},reset:function(){var e=this.state.form;e.errors=[],e.data.contactNo="",e.data.proVoterId=null,e.data.birthdate="",$("#attendee-form #voter-select2").empty().trigger("change"),this.setState({form:e})},openNewProfileModal:function(){this.setState({showNewProfileModal:!0})},closeNewProfileModal:function(){this.setState({showNewProfileModal:!1})},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;console.log("form data"),console.log(t.state.form.data),t.requestPost=$.ajax({url:Routing.generate("ajax_post_kfc_attendance_detail_profile",{dtlId:this.props.hdrId}),data:a,type:"POST"}).done(function(e){t.reset(),t.props.onSuccess()}).fail(function(e){t.setErrors(e.responseJSON)})}});window.KfcAttendanceProfileCreateModal=KfcAttendanceProfileCreateModal;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,KfcAttendanceAssignmentCreateModal=React.createClass({displayName:"KfcAttendanceAssignmentCreateModal",getInitialState:function(){return{showNewProfileModal:!1,showNewVoterCreateModal:!1,form:{data:{contactNo:"",birthdate:"",proVoterId:null},errors:[]}}},openNewVoterCreateModal:function(){console.log("opening modal"),this.setState({showNewVoterCreateModal:!0})},closeNewVoterCreateModal:function(){this.setState({showNewVoterCreateModal:!1})},render:function(){this.state.form.data;return React.createElement(Modal,{style:{marginTop:"30px"},keyboard:!1,enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"New Assignment Profile")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},this.state.showNewVoterCreateModal&&React.createElement(VoterTemporaryCreateModal,{proId:3,electId:423,provinceCode:53,show:this.state.showNewVoterCreateModal,onHide:this.closeNewVoterCreateModal}),React.createElement("form",{id:"attendee-form",onSubmit:this.submit},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-9"},React.createElement(FormGroup,{controlId:"formProVoterId",validationState:this.getValidationState("proVoterId")},React.createElement(ControlLabel,null,"Name : "),React.createElement("select",{id:"voter-select2",className:"form-control input-sm"}),React.createElement(HelpBlock,null,this.getError("proVoterId")))),React.createElement("div",{className:"col-md-3"},React.createElement("button",{style:{marginTop:"25px"},onClick:this.openNewVoterCreateModal,className:"btn btn-primary btn-sm",type:"button"}," Non-voter "))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-4"},React.createElement(FormGroup,{controlId:"formBirthdate",validationState:this.getValidationState("birthdate")},React.createElement(ControlLabel,null,"Birthday: "),React.createElement("input",{type:"date",value:this.state.form.data.birthdate,name:"birthdate",className:"input-md form-control",onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("birthdate")))),React.createElement("div",{className:"col-md-4"},React.createElement(FormGroup,{controlId:"formContactNo",validationState:this.getValidationState("contactNo")},React.createElement(ControlLabel,null," Cellphone No: "),React.createElement("input",{type:"text",value:this.state.form.data.contactNo,name:"contactNo",className:"input-md form-control",onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("contactNo"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12 text-right"},React.createElement("button",{className:"btn btn-primary btn-sm",style:{marginRight:"10px"},type:"submit"}," Submit "),React.createElement("button",{className:"btn btn-default btn-sm",type:"button",onClick:this.props.onHide}," Close "))))))},componentDidMount:function(){this.initSelect2()},initSelect2:function(){var e=this;$("#attendee-form #voter-select2").select2({casesentitive:!1,placeholder:"Enter Name...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",dropdownCssClass:"custom-option",ajax:{url:Routing.generate("ajax_select2_project_voters"),data:function(t){return{searchText:t.term,electId:423,proId:3,provinceCode:53,municipalityNo:$("#attendee-form #municipality_select2").val(),brgyNo:e.props.brgyNo}},processResults:function(e,t){return{results:e.map(function(e){var t=1==e.is_non_voter?"NO":"YES",a=e.voter_name+" ( "+e.municipality_name+", "+e.barangay_name+" ) - is voter? : "+t;return{id:e.pro_voter_id,text:a}})}}}}),$("#attendee-form #voter-select2").on("change",function(){e.loadVoter(3,$(this).val())})},loadVoter:function(e,t){var a=this;a.requestVoter=$.ajax({url:Routing.generate("ajax_get_project_voter",{proId:e,proVoterId:t}),type:"GET"}).done(function(e){var t=a.state.form;t.data.proVoterId=e.proVoterId,t.data.contactNo=e.cellphone,t.data.birthdate=a.isEmpty(e.birthdate)?"":moment(e.birthdate).format("YYYY-MM-DD"),a.setState({form:t})});var n=a.state.form;n.data.proVoterId=null,n.data.contactNo="",a.setState({form:n})},isEmpty:function(e){return null==e||""==e},setFormPropValue:function(e,t){var a=this.state.form;a.data[e]=t,this.setState({form:a})},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value,this.setState({form:t})},setFormCheckProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.checked?1:0,this.setState({form:t})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":""},isEmpty:function(e){return null==e||""==e},reset:function(){var e=this.state.form;e.errors=[],e.data.contactNo="",e.data.proVoterId=null,e.data.birthdate="",$("#attendee-form #voter-select2").empty().trigger("change"),this.setState({form:e})},openNewProfileModal:function(){this.setState({showNewProfileModal:!0})},closeNewProfileModal:function(){this.setState({showNewProfileModal:!1})},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;console.log("form data"),console.log(t.state.form.data),t.requestPost=$.ajax({url:Routing.generate("ajax_post_kfc_attendance_detail_assignment",{dtlId:this.props.hdrId}),data:a,type:"POST"}).done(function(e){t.reset(),t.props.onSuccess()}).fail(function(e){t.setErrors(e.responseJSON)})}});window.KfcAttendanceAssignmentCreateModal=KfcAttendanceAssignmentCreateModal;var KfcAttendanceAssignmentDatatable=React.createClass({displayName:"KfcAttendanceAssignmentDatatable",getInitialState:function(){return{showEditModal:!1,showReleaseModal:!1,target:null,typingTimer:null,doneTypingInterval:1500,user:null,filters:{electId:null,provinceCode:null,proId:null}}},componentDidMount:function(){this.initDatatable()},loadUser:function(e){var t=this;t.requestUser=$.ajax({url:Routing.generate("ajax_get_user",{id:e}),type:"GET"}).done(function(e){t.setState({user:e},t.reinitSelect2)})},initDatatable:function(){var e=this,t=(new Datatable,$("#kfc_attendance_assignment")),a=new Datatable,n=Routing.generate("ajax_get_datatable_kfc_attendance_assignment",{},!0);a.init({src:t,loadingMessage:"Loading...",dataTable:{bState:!0,autoWidth:!0,deferRender:!0,pageLength:100,ajax:{url:n,type:"GET",data:function(t){t.hdrId=e.props.hdrId,t.voterName=$('#kfc_attendance_assignment input[name="voter_name"]').val()}},columnDefs:[{orderable:!1,targets:[0,2,3,4,5,6]},{className:"align-center",targets:[0,3]}],order:[[1,"asc"]],columns:[{data:null,className:"text-center",width:30,render:function(e,t,a,n){return n.settings._iDisplayStart+n.row+1}},{data:"voter_name",className:"text-left"},{data:"municipality_name",className:"text-center",width:250},{data:"barangay_name",className:"text-center",width:150},{data:"contact_no",className:"text-center",width:150},{data:"created_by",className:"text-center",width:50},{width:80,render:function(e,t,a){var n="";return n+='<button class="btn btn-xs red-sunglo delete-btn"><i class="fa fa-trash"></i></button>'},className:"text-center"}]}}),t.on("click",".edit-btn",function(){var t=a.getDataTable().row($(this).parents("tr")).data();e.setState({showEditModal:!0,target:t.id})}),t.on("click",".delete-btn",function(){var t=a.getDataTable().row($(this).parents("tr")).data();e.delete(t.id)}),e.grid=a},closeEditModal:function(){this.setState({showEditModal:!1,target:null}),this.reload()},closeReleaseModal:function(){this.setState({showReleaseModal:!1,target:null})},openCreateModal:function(){this.setState({showCreateModal:!0})},openClosingModal:function(){this.setState({showClosingModal:!0})},delete:function(e){var t=this;confirm("Are you sure you want to delete this assignment profile?")&&(t.requestDelete=$.ajax({url:Routing.generate("ajax_delete_kfc_attendance_detail_assignment",{id:e}),type:"DELETE"}).done(function(e){t.reload(),t.props.reloadDetail()}))},handleFilterChange:function(){var e=this;clearTimeout(this.state.typingTimer),this.state.typingTimer=setTimeout(function(){e.reload()},this.state.doneTypingInterval)},reload:function(){console.log("relaod databable"),null!=this.grid&&this.grid.getDataTable().ajax.reload()},openProfile:function(e){this.setState({showEditModal:!0,target:e})},isEmpty:function(e){return null==e||""==e||"undefined"==e||e<=0},render:function(){return React.createElement("div",null,this.state.showEditModal&&React.createElement(KfcAttendanceListModal,{show:this.state.showEditModal,reload:this.reload,onHide:this.closeEditModal,id:this.state.target}),React.createElement("div",{className:"table-container",style:{marginTop:"20px"}},React.createElement("table",{
id:"kfc_attendance_assignment",className:"table table-striped table-bordered",width:"100%"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"No"),React.createElement("th",null,"Name"),React.createElement("th",null,"Municipality"),React.createElement("th",null,"Barangay"),React.createElement("th",null,"Contact No"),React.createElement("th",null,"Encoder"),React.createElement("th",null)),React.createElement("tr",null,React.createElement("td",null),React.createElement("td",{style:{padding:"10px 5px"}},React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"voter_name",onChange:this.handleFilterChange})),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null))),React.createElement("tbody",null))))}});window.KfcAttendanceAssignmentDatatable=KfcAttendanceAssignmentDatatable;var KfcAttendanceProfileDatatable=React.createClass({displayName:"KfcAttendanceProfileDatatable",getInitialState:function(){return{showEditModal:!1,showReleaseModal:!1,target:null,typingTimer:null,doneTypingInterval:1500,user:null,filters:{electId:null,provinceCode:null,proId:null}}},componentDidMount:function(){this.initDatatable()},loadUser:function(e){var t=this;t.requestUser=$.ajax({url:Routing.generate("ajax_get_user",{id:e}),type:"GET"}).done(function(e){t.setState({user:e},t.reinitSelect2)})},initDatatable:function(){var e=this,t=(new Datatable,$("#kfc_attendance_profile")),a=new Datatable,n=Routing.generate("ajax_get_datatable_kfc_attendance_profile",{},!0);a.init({src:t,loadingMessage:"Loading...",dataTable:{bState:!0,autoWidth:!0,deferRender:!0,pageLength:100,ajax:{url:n,type:"GET",data:function(t){t.hdrId=e.props.hdrId,t.voterName=$('#kfc_attendance_profile input[name="voter_name"]').val()}},columnDefs:[{orderable:!1,targets:[0,2,3,4,5]},{className:"align-center",targets:[0,3]}],order:[[1,"asc"]],columns:[{data:null,className:"text-center",width:30,render:function(e,t,a,n){return n.settings._iDisplayStart+n.row+1}},{data:"voter_name",className:"text-left"},{data:"municipality_name",className:"text-center",width:250},{data:"barangay_name",className:"text-center",width:150},{data:"contact_no",className:"text-center",width:150},{width:80,render:function(e,t,a){var n="";return n+='<button class="btn btn-xs red-sunglo delete-btn"><i class="fa fa-trash"></i></button>'},className:"text-center"}]}}),t.on("click",".edit-btn",function(){var t=a.getDataTable().row($(this).parents("tr")).data();e.setState({showEditModal:!0,target:t.id})}),t.on("click",".delete-btn",function(){var t=a.getDataTable().row($(this).parents("tr")).data();e.delete(t.id)}),e.grid=a},closeEditModal:function(){this.setState({showEditModal:!1,target:null}),this.reload()},closeReleaseModal:function(){this.setState({showReleaseModal:!1,target:null})},openCreateModal:function(){this.setState({showCreateModal:!0})},openClosingModal:function(){this.setState({showClosingModal:!0})},delete:function(e){var t=this;confirm("Are you sure you want to delete this household profile?")&&(t.requestDelete=$.ajax({url:Routing.generate("ajax_delete_kfc_attendance_detail_profile",{id:e}),type:"DELETE"}).done(function(e){t.reload(),t.props.reloadDetail()}))},handleFilterChange:function(){var e=this;clearTimeout(this.state.typingTimer),this.state.typingTimer=setTimeout(function(){e.reload()},this.state.doneTypingInterval)},reload:function(){console.log("relaod databable"),null!=this.grid&&this.grid.getDataTable().ajax.reload()},openProfile:function(e){this.setState({showEditModal:!0,target:e})},isEmpty:function(e){return null==e||""==e||"undefined"==e||e<=0},render:function(){return React.createElement("div",null,this.state.showEditModal&&React.createElement(KfcAttendanceListModal,{show:this.state.showEditModal,reload:this.reload,onHide:this.closeEditModal,id:this.state.target}),React.createElement("div",{className:"table-container",style:{marginTop:"20px"}},React.createElement("table",{id:"kfc_attendance_profile",className:"table table-striped table-bordered",width:"100%"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"No"),React.createElement("th",null,"Name"),React.createElement("th",null,"Municipality"),React.createElement("th",null,"Barangay"),React.createElement("th",null,"Contact No"),React.createElement("th",null)),React.createElement("tr",null,React.createElement("td",null),React.createElement("td",{style:{padding:"10px 5px"}},React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"voter_name",onChange:this.handleFilterChange})),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null))),React.createElement("tbody",null))))}});window.KfcAttendanceProfileDatatable=KfcAttendanceProfileDatatable;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,Tab=ReactBootstrap.Tab,Tabs=ReactBootstrap.Tabs,Nav=ReactBootstrap.Nav,NavItem=ReactBootstrap.NavItem,KfcAttendanceDetailModal=React.createClass({displayName:"KfcAttendanceDetailModal",getInitialState:function(){return{showCreateModal:!1,showAssignmentModal:!1,showProfileModal:!1,active:"profile"}},setSelectedTab:function(e){this.setState({active:e})},closeAssignmentModal:function(){this.setState({showAssignmentModal:!1})},onProfilesCreateSuccess:function(){this.refs.profileDatatable.reload(),this.props.reloadDetail()},onAssignmentCreateSuccess:function(){this.refs.assignmentDatatable.reload(),this.props.reloadDetail()},openAssignmentModal:function(){this.setState({showAssignmentModal:!0})},openProfileModal:function(){this.setState({showProfileModal:!0})},closeProfileModal:function(){this.setState({showProfileModal:!1})},render:function(){return React.createElement(Modal,{style:{marginTop:"50px"},dialogClassName:"modal-custom-70",keyboard:!1,enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"Attendance Detail")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},React.createElement(Tab.Container,{activeKey:this.state.active,onSelect:this.setSelectedTab},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12 m-t-sm"},React.createElement(Nav,{bsStyle:"tabs"},React.createElement(NavItem,{eventKey:"profile"},"Profile"),React.createElement(NavItem,{eventKey:"assignment"},"Assignment"))),React.createElement("div",{className:"col-md-12 m-t-sm"},React.createElement(Tab.Content,{animation:!0},React.createElement(Tab.Pane,{eventKey:"profile"},React.createElement("div",{className:"portlet-body",id:"bcbp_component"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement("br",null),React.createElement("button",{type:"button",className:"btn btn-success btn-sm",onClick:this.openProfileModal,style:{marginRight:"10px"}},"Add household member"))),React.createElement("div",{className:"row"},this.state.showProfileModal&&React.createElement(KfcAttendanceProfileCreateModal,{show:this.state.showProfileModal,onHide:this.closeProfileModal,onSuccess:this.onProfilesCreateSuccess,hdrId:this.props.hdrId}),React.createElement("div",{className:"col-md-12"},React.createElement(KfcAttendanceProfileDatatable,{reloadDetail:this.props.reloadDetail,ref:"profileDatatable",hdrId:this.props.hdrId}))))),React.createElement(Tab.Pane,{eventKey:"assignment"},React.createElement("div",{className:"portlet-body",id:"bcbp_component"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement("br",null),React.createElement("button",{type:"button",className:"btn btn-success btn-sm",style:{marginRight:"10px"},onClick:this.openAssignmentModal},"Add assignment"))),React.createElement("div",{className:"row"},this.state.showAssignmentModal&&React.createElement(KfcAttendanceAssignmentCreateModal,{show:this.state.showAssignmentModal,onHide:this.closeAssignmentModal,onSuccess:this.onAssignmentCreateSuccess,hdrId:this.props.hdrId}),React.createElement("div",{className:"col-md-12"},React.createElement(KfcAttendanceAssignmentDatatable,{reloadDetail:this.props.reloadDetail,ref:"assignmentDatatable",hdrId:this.props.hdrId})))))))))))}});window.KfcAttendanceDetailModal=KfcAttendanceDetailModal;var KfcAttendanceDetailDatatable=React.createClass({displayName:"KfcAttendanceDetailDatatable",getInitialState:function(){return{showEditModal:!1,showReleaseModal:!1,showDetailModal:!1,target:null,typingTimer:null,doneTypingInterval:1500,showDetailModal:!1,user:null,filters:{electId:null,provinceCode:null,proId:null}}},componentDidMount:function(){this.initDatatable()},loadUser:function(e){var t=this;t.requestUser=$.ajax({url:Routing.generate("ajax_get_user",{id:e}),type:"GET"}).done(function(e){t.setState({user:e},t.reinitSelect2)})},initDatatable:function(){var e=this,t=(new Datatable,$("#kfc_attendance_detail_table")),a=new Datatable,n=Routing.generate("ajax_get_datatable_kfc_attendance_detail",{},!0);a.init({src:t,loadingMessage:"Loading...",dataTable:{bState:!0,autoWidth:!0,deferRender:!0,pageLength:100,ajax:{url:n,type:"GET",data:function(t){t.hdrId=e.props.id,t.voterName=$('#kfc_attendance_detail_table input[name="voter_name"]').val(),t.municipalityName=$('#kfc_attendance_detail_table input[name="municipality_name"]').val(),t.barangayName=$('#kfc_attendance_detail_table input[name="barangay_name"]').val(),t.contactNo=$('#kfc_attendance_detail_table input[name="contact_no"]').val()}},columnDefs:[{orderable:!1,targets:[0,2,3,4,5,6,7,8,9]},{className:"align-center",targets:[0,3]}],order:[[0,"desc"]],columns:[{data:null,className:"text-center",width:30,render:function(e,t,a,n){return n.settings._iDisplayStart+n.row+1}},{data:"voter_name",className:"text-left"},{data:"municipality_name",className:"text-center",width:150},{data:"barangay_name",className:"text-center",width:150},{data:"contact_no",className:"text-center",width:100},{data:"has_profile",className:"text-center",width:30,render:function(e,t,a){return'<label class="mt-checkbox status-checkbox"><input type="checkbox" name="hasProfile" '+(1==parseInt(e)?' checked="checked" ':"")+' value="'+a.id+'"></input><span></span></label>'}},{data:"total_profile",className:"text-center",width:30},{data:"has_assignment",className:"text-center",width:30,render:function(e,t,a){return'<label class="mt-checkbox status-checkbox"><input type="checkbox" name="hasAssignment" '+(1==parseInt(e)?' checked="checked" ':"")+' value="'+a.id+'"></input><span></span></label>'}},{data:"total_assignment",className:"text-center",width:30},{width:80,render:function(e,t,a){var n="";return n+='<button class="btn btn-xs green edit-btn"><i class="fa fa-edit"></i></button><button class="btn btn-xs red-sunglo delete-btn"><i class="fa fa-trash"></i></button>'},className:"text-center"}]}}),t.on("click",".edit-btn",function(){var t=a.getDataTable().row($(this).parents("tr")).data();e.setState({showDetailModal:!0,target:t.id})}),t.on("click",".delete-btn",function(){var t=a.getDataTable().row($(this).parents("tr")).data();e.delete(t.id)}),t.on("click",".status-checkbox",function(t){var a=t.target.value,n=t.target.checked,o=t.target.name,r=n?1:0;null!=a&&null!=n&&e.patchStatus(a,o,r)}),e.grid=a},patchStatus:function(e,t,a){var n=this,o={};o[t]=a,n.requestToggleRequirement=$.ajax({url:Routing.generate("ajax_patch_attendance_tag_has_profile",{id:e}),type:"PATCH",data:o}).done(function(e){n.reload()})},closeEditModal:function(){this.setState({showEditModal:!1,target:null}),this.reload()},closeReleaseModal:function(){this.setState({showReleaseModal:!1,target:null})},openCreateModal:function(){this.setState({showCreateModal:!0})},openClosingModal:function(){this.setState({showClosingModal:!0})},closeDetailModal:function(){this.setState({showDetailModal:!1,target:null})},delete:function(e){var t=this;confirm("Are you sure you want to delete this request?")&&(t.requestDelete=$.ajax({url:Routing.generate("ajax_delete_kfc_attendance_detail",{id:e}),type:"DELETE"}).done(function(e){t.reload()}))},handleFilterChange:function(){var e=this;clearTimeout(this.state.typingTimer),this.state.typingTimer=setTimeout(function(){e.reload()},this.state.doneTypingInterval)},reload:function(){console.log("relaod databable"),null!=this.grid&&this.grid.getDataTable().ajax.reload()},openProfile:function(e){this.setState({showEditModal:!0,target:e})},isEmpty:function(e){return null==e||""==e||"undefined"==e||e<=0},render:function(){return React.createElement("div",null,React.createElement("div",{className:"table-container",style:{marginTop:"20px"}},this.state.showDetailModal&&React.createElement(KfcAttendanceDetailModal,{show:this.state.showDetailModal,onHide:this.closeDetailModal,hdrId:this.state.target,reloadDetail:this.reload}),React.createElement("table",{id:"kfc_attendance_detail_table",className:"table table-striped table-bordered",width:"100%"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"No"),React.createElement("th",null,"Name"),React.createElement("th",null,"Municipality"),React.createElement("th",null,"Barangay"),React.createElement("th",null,"Contact No"),React.createElement("th",null,"Profile"),React.createElement("th",null,"Total"),React.createElement("th",null,"Assignment"),React.createElement("th",null,"Total"),React.createElement("th",null)),React.createElement("tr",null,React.createElement("td",null),React.createElement("td",{style:{padding:"10px 5px"}},React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"voter_name",onChange:this.handleFilterChange})),React.createElement("td",null),React.createElement("td",{style:{padding:"10px 5px"}},React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"municipality_name",onChange:this.handleFilterChange})),React.createElement("td",{style:{padding:"10px 5px"}},React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"barangay_name",onChange:this.handleFilterChange})),React.createElement("td",{style:{padding:"10px 5px"}},React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"contact_no",onChange:this.handleFilterChange})),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null))),React.createElement("tbody",null))))}});window.KfcAttendanceDetailDatatable=KfcAttendanceDetailDatatable;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,KfcAttendanceAddAttendeeModal=React.createClass({displayName:"KfcAttendanceAddAttendeeModal",getInitialState:function(){return{showNewProfileModal:!1,showNewVoterCreateModal:!1,form:{data:{contactNo:"",proVoterId:null},errors:[]}}},openNewVoterCreateModal:function(){console.log("opening modal"),this.setState({showNewVoterCreateModal:!0})},closeNewVoterCreateModal:function(){this.setState({showNewVoterCreateModal:!1})},render:function(){this.state.form.data;return React.createElement(Modal,{style:{marginTop:"10px"},keyboard:!1,enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"New Attendee")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},this.state.showNewVoterCreateModal&&React.createElement(VoterTemporaryCreateModal,{proId:3,electId:423,provinceCode:53,show:this.state.showNewVoterCreateModal,onHide:this.closeNewVoterCreateModal}),React.createElement("form",{id:"attendee-form",onSubmit:this.submit},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-9"},React.createElement(FormGroup,{controlId:"formProVoterId",validationState:this.getValidationState("proVoterId")},React.createElement(ControlLabel,null,"Name : "),React.createElement("select",{id:"voter-select2",className:"form-control input-sm"}),React.createElement(HelpBlock,null,this.getError("proVoterId")))),React.createElement("div",{className:"col-md-3"},React.createElement("button",{style:{marginTop:"25px"},onClick:this.openNewVoterCreateModal,className:"btn btn-primary btn-sm",type:"button"}," Non-voter "))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-4"},React.createElement(FormGroup,{controlId:"formContactNo",validationState:this.getValidationState("contactNo")},React.createElement(ControlLabel,null," Cellphone No: "),React.createElement("input",{type:"text",value:this.state.form.data.contactNo,name:"contactNo",className:"input-md form-control",onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("contactNo"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12 text-right"},React.createElement("button",{className:"btn btn-primary btn-sm",style:{marginRight:"10px"},type:"submit"}," Submit "),React.createElement("button",{className:"btn btn-default btn-sm",type:"button",onClick:this.props.onHide}," Close "))))))},componentDidMount:function(){this.initSelect2()},initSelect2:function(){var e=this;$("#attendee-form #voter-select2").select2({casesentitive:!1,placeholder:"Enter Name...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",dropdownCssClass:"custom-option",ajax:{url:Routing.generate("ajax_select2_project_voters"),data:function(t){return{searchText:t.term,electId:423,proId:3,provinceCode:53,municipalityNo:$("#attendee-form #municipality_select2").val(),brgyNo:e.props.brgyNo}},processResults:function(e,t){return{results:e.map(function(e){var t=1==e.is_non_voter?"NO":"YES",a=e.voter_name+" ( "+e.municipality_name+", "+e.barangay_name+" ) - is voter? : "+t;return{id:e.pro_voter_id,text:a}})}}}}),$("#attendee-form #voter-select2").on("change",function(){e.loadVoter(3,$(this).val())})},loadVoter:function(e,t){var a=this;a.requestVoter=$.ajax({url:Routing.generate("ajax_get_project_voter",{proId:e,proVoterId:t}),type:"GET"}).done(function(e){var t=a.state.form;t.data.proVoterId=e.proVoterId,t.data.contactNo=e.cellphone,a.setState({form:t})});var n=a.state.form;n.data.proVoterId=null,n.data.contactNo="",a.setState({form:n})},setFormPropValue:function(e,t){var a=this.state.form;a.data[e]=t,this.setState({form:a})},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value,this.setState({form:t})},setFormCheckProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.checked?1:0,this.setState({form:t})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":""},isEmpty:function(e){return null==e||""==e},reset:function(){var e=this.state.form;e.errors=[],e.data.contactNo="",e.data.proVoterId=null,$("#attendee-form #voter-select2").empty().trigger("change"),this.setState({form:e})},openNewProfileModal:function(){this.setState({showNewProfileModal:!0})},closeNewProfileModal:function(){this.setState({showNewProfileModal:!1})},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;console.log("form data"),console.log(t.state.form.data),t.requestPost=$.ajax({url:Routing.generate("ajax_post_kfc_attendance_detail",{id:this.props.id}),data:a,type:"POST"}).done(function(e){t.reset(),t.props.onSuccess()}).fail(function(e){t.setErrors(e.responseJSON)})}});window.KfcAttendanceAddAttendeeModal=KfcAttendanceAddAttendeeModal;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,KfcAttendanceListModal=React.createClass({displayName:"KfcAttendanceListModal",getInitialState:function(){return{showCreateModal:!1}},openCreateModal:function(){console.log("open sms modal"),this.setState({showCreateModal:!0}),console.log(this.state.showCreateModal)},closeCreateModal:function(){this.setState({showCreateModal:!1})},reloadDatatable:function(){this.refs.detailDatatable.reload()},onCreateSuccess:function(){this.reloadDatatable()},render:function(){return React.createElement(Modal,{style:{marginTop:"10px"},dialogClassName:"modal-custom-85",keyboard:!1,enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"KFC attendance")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},this.state.showCreateModal&&React.createElement(KfcAttendanceAddAttendeeModal,{show:this.state.showCreateModal,onHide:this.closeCreateModal,onSuccess:this.onCreateSuccess,id:this.props.id}),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement("button",{type:"button",className:"btn btn-success btn-sm",style:{marginRight:"10px"},onClick:this.openCreateModal},"Add Attendee"))),React.createElement(KfcAttendanceDetailDatatable,{ref:"detailDatatable",id:this.props.id})))}});window.KfcAttendanceListModal=KfcAttendanceListModal;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,KfcAttendanceCreateModal=React.createClass({displayName:"KfcAttendanceCreateModal",getInitialState:function(){return{showNewProfileModal:!1,form:{data:{municipalityNo:"",barangayNo:"",meetingDate:"",description:"",meetingGroup:"",meetingPosition:""},errors:[]}}},render:function(){this.state.form.data;return React.createElement(Modal,{style:{marginTop:"10px"},bsSize:"lg",keyboard:!1,enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"New Attendance")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},React.createElement("form",{id:"kfc-attendance-form"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formMunicipality",validationState:this.getValidationState("municipalityNo")},React.createElement("label",{className:"control-label"},"City/Municipality"),React.createElement("select",{id:"municipality_select2",className:"form-control form-filter input-sm",name:"municipalityNo"}),React.createElement(HelpBlock,null,this.getError("municipalityNo")))),React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formBarangay",validationState:this.getValidationState("barangayNo")},React.createElement("label",{className:"control-label"},"Barangay"),React.createElement("select",{id:"barangay_select2",className:"form-control form-filter input-sm",name:"brgyNo"}),React.createElement(HelpBlock,null,this.getError("barangayNo"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formMeetingGroup",validationState:this.getValidationState("meetingGroup")},React.createElement("label",{className:"control-label"},"Group"),React.createElement("select",{id:"group_select2",className:"form-control form-filter input-sm",name:"meetingGroup"}),React.createElement(HelpBlock,null,this.getError("meetingGroup")))),React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formMeetingPosition",validationState:this.getValidationState("meetingPosition")},React.createElement("label",{className:"control-label"},"Position"),React.createElement("select",{id:"position_select2",className:"form-control form-filter input-sm",name:"meetingPosition"}),React.createElement(HelpBlock,null,this.getError("meetingPosition"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formBirthdate",validationState:this.getValidationState("meetingDate")},React.createElement(ControlLabel,null," Meeting Date : "),React.createElement("input",{type:"date",className:"input-md form-control",value:this.state.form.data.meetingDate,name:"meetingDate",onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("meetingDate"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement(FormGroup,{controlId:"formDescription",validationState:this.getValidationState("description")},React.createElement(ControlLabel,null," Description : "),React.createElement("textarea",{type:"text",rows:"3",value:this.state.form.data.description,name:"description",className:"input-md form-control",onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("description"))))))),React.createElement("div",{className:"clearfix"}),React.createElement("div",{className:"text-right",style:{marginTop:"30px"}},React.createElement("button",{type:"button",className:"btn-lg btn-default",style:{marginRight:"5px"},onClick:this.props.onHide},"Close"),React.createElement("button",{type:"button",className:"btn-lg btn-primary",onClick:this.submit},"Submit")))))},componentDidMount:function(){this.initSelect2()},initSelect2:function(){var e=this;$("#kfc-attendance-form #municipality_select2").select2({casesentitive:!1,placeholder:"Select City/Municipality",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_municipality"),data:function(e){return{searchText:e.term,provinceCode:53}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.municipality_no,text:e.name}})}}}}),$("#kfc-attendance-form #barangay_select2").select2({casesentitive:!1,placeholder:"Select Barangay",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_barangay"),data:function(e){return{searchText:e.term,municipalityNo:$("#kfc-attendance-form #municipality_select2").val(),provinceCode:53}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.brgy_no,text:e.name}})}}}}),$("#kfc-attendance-form #position_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_meeting_position"),data:function(e){return{searchText:e.term,provinceCode:53}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.meeting_position,text:e.meeting_position}})}}}}),$("#kfc-attendance-form #group_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_meeting_group"),data:function(e){return{searchText:e.term,provinceCode:53}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.meeting_group,text:e.meeting_group}})}}}}),$("#kfc-attendance-form #municipality_select2").on("change",function(){e.setFormPropValue("municipalityNo",$(this).val())}),$("#kfc-attendance-form #barangay_select2").on("change",function(){e.setFormPropValue("barangayNo",$(this).val())}),$("#kfc-attendance-form #group_select2").on("change",function(){e.setFormPropValue("meetingGroup",$(this).val())}),$("#kfc-attendance-form #position_select2").on("change",function(){e.setFormPropValue("meetingPosition",$(this).val())})},setFormPropValue:function(e,t){var a=this.state.form;a.data[e]=t,this.setState({form:a})},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value,this.setState({form:t})},setFormCheckProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.checked?1:0,this.setState({form:t})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":""},isEmpty:function(e){return null==e||""==e},reset:function(){var e=this.state.form;e.errors=[],e.data.firstname="",e.data.lastname="",e.data.nickname="",e.data.birthdate="",e.data.contactNumber="",this.setState({form:e})},openNewProfileModal:function(){this.setState({showNewProfileModal:!0})},closeNewProfileModal:function(){this.setState({showNewProfileModal:!1})},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;console.log("form data"),console.log(t.state.form.data),t.requestPost=$.ajax({url:Routing.generate("ajax_post_kfc_attendance"),data:a,type:"POST"}).done(function(e){t.reset(),t.props.onSuccess()}).fail(function(e){t.setErrors(e.responseJSON)})}});window.KfcAttendanceCreateModal=KfcAttendanceCreateModal;var KfcAttendanceDatatable=React.createClass({displayName:"KfcAttendanceDatatable",getInitialState:function(){return{showEditModal:!1,showReleaseModal:!1,target:null,typingTimer:null,doneTypingInterval:1500,user:null,filters:{electId:null,provinceCode:null,proId:null}}},componentDidMount:function(){this.initDatatable()},loadUser:function(e){var t=this;t.requestUser=$.ajax({url:Routing.generate("ajax_get_user",{id:e}),type:"GET"}).done(function(e){t.setState({user:e},t.reinitSelect2)})},initDatatable:function(){var e=this,t=(new Datatable,$("#kfc_attendance_table")),a=new Datatable,n=Routing.generate("ajax_get_datatable_kfc_attendance",{},!0);a.init({src:t,loadingMessage:"Loading...",dataTable:{bState:!0,autoWidth:!0,deferRender:!0,pageLength:100,ajax:{url:n,type:"GET",data:function(e){e.description=$('#kfc_attendance_table input[name="description"]').val(),e.municipalityName=$('#kfc_attendance_table input[name="municipality_name"]').val(),e.barangayName=$('#kfc_attendance_table input[name="barangay_name"]').val(),e.meetingDate=$('#kfc_attendance_table input[name="meeting_date"]').val(),e.meetingPosition=$('#kfc_attendance_table input[name="meeting_position"]').val(),e.meetingGroup=$('#kfc_attendance_table input[name="meeting_group"]').val()}},columnDefs:[{orderable:!1,targets:[0,2,3,4,5,6,7,8,9,10]},{className:"align-center",targets:[0,3]}],order:[[1,"asc"]],columns:[{data:null,className:"text-center",width:30,render:function(e,t,a,n){return n.settings._iDisplayStart+n.row+1}},{data:"description",className:"text-left"},{data:"municipality_name",className:"text-center",width:250},{data:"barangay_name",className:"text-center",width:150},{data:"meeting_group",className:"text-center",width:50},{data:"meeting_position",className:"text-center",width:50},{data:"meeting_date",className:"text-center",width:100},{data:"total_attendee",className:"text-center",width:50},{data:"total_attendee_profile",className:"text-center",width:50},{data:"total_attendee_assignment",className:"text-center",width:50},{width:80,render:function(e,t,a){var n="";return n+='<button class="btn btn-xs green edit-btn"><i class="fa fa-edit"></i></button><button class="btn btn-xs red-sunglo delete-btn"><i class="fa fa-trash"></i></button>'},className:"text-center"}]}}),t.on("click",".edit-btn",function(){var t=a.getDataTable().row($(this).parents("tr")).data();e.setState({showEditModal:!0,target:t.id})}),t.on("click",".delete-btn",function(){
var t=a.getDataTable().row($(this).parents("tr")).data();e.delete(t.id)}),e.grid=a},closeEditModal:function(){this.setState({showEditModal:!1,target:null}),this.reload()},closeReleaseModal:function(){this.setState({showReleaseModal:!1,target:null})},openCreateModal:function(){this.setState({showCreateModal:!0})},openClosingModal:function(){this.setState({showClosingModal:!0})},delete:function(e){var t=this;confirm("Are you sure you want to delete this request?")&&(t.requestDelete=$.ajax({url:Routing.generate("ajax_delete_kfc_attendance",{id:e}),type:"DELETE"}).done(function(e){t.reload()}))},handleFilterChange:function(){var e=this;clearTimeout(this.state.typingTimer),this.state.typingTimer=setTimeout(function(){e.reload()},this.state.doneTypingInterval)},reload:function(){console.log("relaod databable"),null!=this.grid&&this.grid.getDataTable().ajax.reload()},openProfile:function(e){this.setState({showEditModal:!0,target:e})},isEmpty:function(e){return null==e||""==e||"undefined"==e||e<=0},render:function(){return React.createElement("div",null,this.state.showEditModal&&React.createElement(KfcAttendanceListModal,{show:this.state.showEditModal,reload:this.reload,onHide:this.closeEditModal,id:this.state.target}),React.createElement("div",{className:"table-container",style:{marginTop:"20px"}},React.createElement("table",{id:"kfc_attendance_table",className:"table table-striped table-bordered",width:"100%"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"No"),React.createElement("th",null,"Description"),React.createElement("th",null,"Municipality"),React.createElement("th",null,"Barangay"),React.createElement("th",null,"Group"),React.createElement("th",null,"Position"),React.createElement("th",null,"Date"),React.createElement("th",null,"Attendee"),React.createElement("th",null,"With Profiles"),React.createElement("th",null,"With Assignment"),React.createElement("th",null)),React.createElement("tr",null,React.createElement("td",null),React.createElement("td",{style:{padding:"10px 5px"}},React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"description",onChange:this.handleFilterChange})),React.createElement("td",{style:{padding:"10px 5px"}},React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"municipality_name",onChange:this.handleFilterChange})),React.createElement("td",{style:{padding:"10px 5px"}},React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"barangay_name",onChange:this.handleFilterChange})),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"meeting_group",onChange:this.handleFilterChange})),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"meeting_position",onChange:this.handleFilterChange})),React.createElement("td",{style:{padding:"10px 5px"}},React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"meeting_date",onChange:this.handleFilterChange})),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null))),React.createElement("tbody",null))))}});window.KfcAttendanceDatatable=KfcAttendanceDatatable;var KfcAttendance=React.createClass({displayName:"KfcAttendance",getInitialState:function(){return{showCreateModal:!1,showSmsModal:!1,form:{data:{}}}},openCreateModal:function(){console.log("open sms modal"),this.setState({showCreateModal:!0}),console.log(this.state.showCreateModal)},closeCreateModal:function(){this.setState({showCreateModal:!1}),this.refs.bcbpDatatableRef.reload()},onCreateSuccess:function(){this.refs.attendanceDatatable.reload(),this.setState({showCreateModal:!1})},render:function(){return React.createElement("div",{className:"portlet light portlet-fit bordered"},this.state.showCreateModal&&React.createElement(KfcAttendanceCreateModal,{show:this.state.showCreateModal,onHide:this.closeCreateModal,onSuccess:this.onCreateSuccess}),React.createElement("div",{className:"portlet-body",id:"bcbp_component"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement("button",{type:"button",className:"btn btn-success btn-sm",style:{marginRight:"10px"},onClick:this.openCreateModal},"Add Attendance"))),React.createElement("div",{className:"row"},React.createElement(KfcAttendanceDatatable,{ref:"attendanceDatatable"}))))}});setTimeout(function(){ReactDOM.render(React.createElement(KfcAttendance,null),document.getElementById("page-container"))},500);